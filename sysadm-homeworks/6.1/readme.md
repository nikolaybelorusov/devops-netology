# Домашнее задание к занятию "6.1. Типы и структура СУБД"


## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
``` 
Документо-ориентированные - подходит для храниения документов
```
- Склады и автомобильные дороги для логистической компании
``` 
Графовая - позволит вычислять оптимальные маршруты между узлами (склады)
```
- Генеалогические деревья
``` 
Иерархическая - лучший выбор для описания связи родитель-потомок
```
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
``` 
Ключ-значение - идентификатор клиента - "ключ", "значение" - время жизни токена аутентификации и возможно дополнительные параметры
```
- Отношения клиент-покупка для интернет-магазина
``` 
Реляционная - описание таблиц клиентов и таблиц их покупок. Тип связи 1 - n для хранения заказа. 
```
Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
``` 
 PA - доступность и устойчивость к разделению, без согласованности. 
 ```
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
``` 
PA -доступность и устойчивость к разделению.
```
- Система может не прислать корректный ответ или сбросить соединение
``` 
AC - отсутствует устойчивость к разделению.
```

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

``` 
 PA/EC - с большой долей вероятности будут жертвовать доступностью в угоду консистентности
 ```
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
``` 
PA/EL - высокая доступность при разделении. Время на доставку данных не так критично.
```
- Система может не прислать корректный ответ или сбросить соединение
``` 
PC/EC
```


## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?
``` 
BASE и ACID противоположные (несочетаемые) принципы.
Base позволяет проектировать высокопроизводительные системы, в то время как ACID  позволяет проектировать высоконадежные системы. 
```
## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?
```
Одним из возможных решений будет Redis. 
Недостатки:
- при сбросе данных на диске, если во время записи произойдет сбой, это приведет к потере данных
- один поток. Один сервер не может полностью использовать ЦП многоядерного сервера.
- ограничение памяти, нельзя использовать для массовых данных
- издатель может перегрузить работой своих подписчиков, если данные публикуются быстрее, чем обрабатываются
- подписчики получат сообщение одновременно.
```
---
